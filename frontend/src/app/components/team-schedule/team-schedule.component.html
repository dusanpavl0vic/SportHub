<!-- HTML -->
<div class="groups-section">
  <div class="section-header">
    <h3 class="section-title">Grupe</h3>
    <button *ngIf="meTeam" class="add-group-btn" (click)="openCreateGroup()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
      <span>Dodaj grupu</span>
    </button>
  </div>

  <div class="groups-list" *ngIf="groups && groups.length > 0">
    <div *ngFor="let g of groups" class="group-item" [class.active]="selectedGroup?.id === g.id"
      (click)="selectGroup(g)">
      <div class="group-info">
        <span class="group-name">{{ g.name }}</span>
        <div class="group-indicator"></div>
      </div>

      <button *ngIf="meTeam" class="delete-btn" (click)="deleteGroup(g)" title="Obriši grupu">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="3 6 5 6 21 6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          <line x1="10" y1="11" x2="10" y2="17"></line>
          <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
      </button>
    </div>
  </div>

  <div class="empty-groups" *ngIf="!groups || groups.length === 0">
    <div class="empty-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="9" y1="9" x2="15" y2="15"></line>
        <line x1="15" y1="9" x2="9" y2="15"></line>
      </svg>
    </div>
    <p class="empty-text">
      <ng-container *ngIf="meTeam">
        Nemate nijednu grupu. Kliknite na dugme iznad da dodate prvu.
      </ng-container>
      <ng-container *ngIf="!meTeam">
        Tim još uvek nema nijednu grupu.
      </ng-container>
    </p>
  </div>
</div>


<app-group-schedule-table *ngIf="selectedGroup" [group]="selectedGroup || []" [schedules]="schedules" [isOwner]="meTeam"
  (changed)="onDataChanged()">
</app-group-schedule-table>